"use strict";function _toConsumableArray(a){if(Array.isArray(a)){for(var e=0,n=Array(a.length);e<a.length;e++)n[e]=a[e];return n}return Array.from(a)}function isStoreNameValid(a){if(!a)return!1;var e=a.indexOf("-"),n=a.lastIndexOf("-"),i=a.indexOf("--");return"_"===a[0]||"_"===a[a.length-1]||0>=e||n===a.length-1||i>=0?!1:a.match(illegalNameCharacters)?!1:!0}function isMappingNameValid(a){return a?"_"===a[0]?!1:a.match(illegalNameCharacters)?!1:-1===_constants.RDS_SYSTEM_FIELDS.indexOf(a):!1}function isMappingTypeValid(a){return _constants.RDS_FIELD_TYPES.indexOf(a)>=0}function isMappingValid(a){return isMappingNameValid(a.name)&&isMappingTypeValid(a.type)}function areMappingsValid(a){if(!a||!Array.isArray(a)||!a.length)return!1;var e=a.find(function(a){return!isMappingValid(a)});if(e)return!1;var n=a.map(function(a){return{count:1,name:a.name}}).reduce(function(a,e){return a[e.name]=(a[e.name]||0)+e.count,a},{}),i=Object.keys(n).find(function(a){return n[a]>1});return i?!1:!0}function isAdsMandatoryFieldValid(a,e){if(!e||!a)return!1;switch(a){case"mimeType":return _constants.ADS_FILE_TYPES.indexOf(e)>=0;case"path":return"/"===e[0];default:return!0}}function areAdsMandatoryFieldsValid(a){return void 0===Object.keys(a).find(function(e){return!isAdsMandatoryFieldValid(e,a[e])})}function isAdsCustomFieldNameValid(a){return!!a&&-1===_constants.ADS_SYSTEM_FIELDS.indexOf(a)}function areAdsFieldsValid(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!a)return!1;var n=areAdsMandatoryFieldsValid(a),i=!e.find(function(a){return!isAdsCustomFieldNameValid(a.name)});if(!n||!i)return!1;var r=[].concat(_toConsumableArray(Object.keys(a)),_toConsumableArray(e)).map(function(a){return{count:1,name:a.name||a}}).reduce(function(a,e){return a[e.name]=(a[e.name]||0)+e.count,a},{}),t=!!Object.keys(r).find(function(a){return r[a]>1});return!t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isStoreNameValid=isStoreNameValid,exports.isMappingNameValid=isMappingNameValid,exports.isMappingTypeValid=isMappingTypeValid,exports.isMappingValid=isMappingValid,exports.areMappingsValid=areMappingsValid,exports.isAdsMandatoryFieldValid=isAdsMandatoryFieldValid,exports.areAdsMandatoryFieldsValid=areAdsMandatoryFieldsValid,exports.isAdsCustomFieldNameValid=isAdsCustomFieldNameValid,exports.areAdsFieldsValid=areAdsFieldsValid;var _constants=require("../constants"),illegalNameCharacters=/.*[^\w\-].*/g;