"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t["default"]=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,o,a){return o&&e(t.prototype,o),a&&e(t,a),t}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_reactAddonsPureRenderMixin=require("react-addons-pure-render-mixin"),_reactAddonsPureRenderMixin2=_interopRequireDefault(_reactAddonsPureRenderMixin),_reactIntl=require("react-intl"),_ToolbarGroup=require("material-ui/Toolbar/ToolbarGroup"),_ToolbarGroup2=_interopRequireDefault(_ToolbarGroup),_ToolbarTitle=require("material-ui/Toolbar/ToolbarTitle"),_ToolbarTitle2=_interopRequireDefault(_ToolbarTitle),_IconButton=require("material-ui/IconButton"),_IconButton2=_interopRequireDefault(_IconButton),_save=require("material-ui/svg-icons/content/save"),_save2=_interopRequireDefault(_save),_close2=require("material-ui/svg-icons/navigation/close"),_close3=_interopRequireDefault(_close2),_undo=require("material-ui/svg-icons/content/undo"),_undo2=_interopRequireDefault(_undo),_Dialog=require("material-ui/Dialog"),_Dialog2=_interopRequireDefault(_Dialog),_FlatButton=require("material-ui/FlatButton"),_FlatButton2=_interopRequireDefault(_FlatButton),_lcm=require("../../actions/lcm"),lcmActions=_interopRequireWildcard(_lcm),LcmHeader=function(e){function t(){var e;_classCallCheck(this,t);for(var o=arguments.length,a=Array(o),n=0;o>n;n++)a[n]=arguments[n];var l=_possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return l._toggleActionsMenu=l._toggleActionsMenu.bind(l),l._closeAll=l._closeAll.bind(l),l._toggleResetContentDialog=l._toggleResetContentDialog.bind(l),l._confirmLcmReset=l._confirmLcmReset.bind(l),l._toggleSaveContentDialog=l._toggleSaveContentDialog.bind(l),l._confirmSave=l._confirmSave.bind(l),l._toggleCloseContentDialog=l._toggleCloseContentDialog.bind(l),l._close=l._close.bind(l),l.shouldComponentUpdate=_reactAddonsPureRenderMixin2["default"].shouldComponentUpdate.bind(l),l}return _inherits(t,e),_createClass(t,[{key:"componentDidUpdate",value:function(){var e=this;Mousetrap.bind(["esc"],function(){return e._closeAll()})}},{key:"componentWillUnmount",value:function(){Mousetrap.unbind(["esc"])}},{key:"_toggleActionsMenu",value:function(){this.props.dispatch(lcmActions.toggleActionsContentMenu())}},{key:"_closeAll",value:function(){this.props.dispatch(lcmActions.closeAll())}},{key:"_toggleResetContentDialog",value:function(){this.props.dispatch(lcmActions.toggleResetContentDialog())}},{key:"_confirmLcmReset",value:function(){this.props.dispatch(lcmActions.resetData(this.props.lcm.model.storeName,this.props.lcm.isStagedStore))}},{key:"_toggleSaveContentDialog",value:function(){this.props.dispatch(lcmActions.toggleSaveContentDialog())}},{key:"_confirmSave",value:function(){this.props.dispatch(lcmActions.saveChanges(this.props.lcm))}},{key:"_toggleCloseContentDialog",value:function(){this.props.lcm.isDirty?this.props.dispatch(lcmActions.toggleCloseContentDialog()):this._close()}},{key:"_close",value:function(){this.props.dispatch(global.insight.navigateToParent())}},{key:"render",value:function(){var e,t,o=this.props,a=o.intl,n=o.lcm,l=this.context.muiTheme,r=n.model.storeName;return _react2["default"].createElement("div",{className:"top-navigation-container"},_react2["default"].createElement(_ToolbarGroup2["default"],{className:"flex-header"},_react2["default"].createElement(_ToolbarGroup2["default"],{className:"top-navigation-header flex-header"},_react2["default"].createElement(_ToolbarTitle2["default"],{text:r+" - Life Cycle Management",style:{color:l.appBar.textColor}}))),_react2["default"].createElement(_ToolbarGroup2["default"],{className:"top-navigation-action-buttons-container",lastChild:!0},_react2["default"].createElement(_FlatButton2["default"],(e={label:a.formatMessage({id:"insight.xds.component.lcm.save"}),onTouchTap:this._toggleSaveContentDialog,style:{color:l.appBar.textColor},icon:_react2["default"].createElement(_close3["default"],{color:l.appBar.textColor}),labelPosition:"after"},_defineProperty(e,"icon",_react2["default"].createElement(_save2["default"],null)),_defineProperty(e,"className","top-navigation-action-buttons"),e)),_react2["default"].createElement(_FlatButton2["default"],(t={label:a.formatMessage({id:"insight.xds.component.lcm.reset"}),onTouchTap:this._toggleResetContentDialog,style:{color:l.appBar.textColor},icon:_react2["default"].createElement(_close3["default"],{color:l.appBar.textColor}),labelPosition:"after"},_defineProperty(t,"icon",_react2["default"].createElement(_undo2["default"],null)),_defineProperty(t,"className","top-navigation-action-buttons"),t)),_react2["default"].createElement(_IconButton2["default"],{title:a.formatMessage({id:"close"}),iconStyle:{color:l.appBar.textColor},onTouchTap:this._toggleCloseContentDialog},_react2["default"].createElement(_close3["default"],{color:l.appBar.textColor}))),_react2["default"].createElement(_Dialog2["default"],{open:n.showResetContentDialog,title:a.formatMessage({id:"insight.xds.component.lcm.reset"}),actions:[_react2["default"].createElement(_FlatButton2["default"],{key:0,onTouchTap:this._toggleResetContentDialog,label:a.formatMessage({id:"close"}),secondary:!0}),_react2["default"].createElement(_FlatButton2["default"],{key:1,onTouchTap:this._confirmLcmReset,label:a.formatMessage({id:"confirm"}),primary:!0,keyboardFocused:!0})]},_react2["default"].createElement(_reactIntl.FormattedMessage,{id:"insight.xds.component.lcm.reset.content"})),_react2["default"].createElement(_Dialog2["default"],{open:n.showSaveContentDialog,title:a.formatMessage({id:"insight.xds.component.lcm.save"}),actions:[_react2["default"].createElement(_FlatButton2["default"],{key:0,onTouchTap:this._toggleSaveContentDialog,label:a.formatMessage({id:"close"}),secondary:!0}),_react2["default"].createElement(_FlatButton2["default"],{key:1,onTouchTap:this._confirmSave,label:a.formatMessage({id:"confirm"}),primary:!0,keyboardFocused:!0})]},_react2["default"].createElement(_reactIntl.FormattedMessage,{id:"insight.xds.component.lcm.save.content"})),_react2["default"].createElement(_Dialog2["default"],{open:n.showCloseContentDialog,title:a.formatMessage({id:"close"}),actions:[_react2["default"].createElement(_FlatButton2["default"],{key:0,onTouchTap:this._toggleCloseContentDialog,label:a.formatMessage({id:"close"}),secondary:!0}),_react2["default"].createElement(_FlatButton2["default"],{key:1,onTouchTap:this._close,label:a.formatMessage({id:"confirm"}),primary:!0,keyboardFocused:!0})]},_react2["default"].createElement(_reactIntl.FormattedMessage,{id:"insight.xds.component.lcm.close.content"})))}}]),t}(_react2["default"].Component);LcmHeader.contextTypes={muiTheme:_react2["default"].PropTypes.object.isRequired},exports["default"]=_reactIntl.injectIntl(LcmHeader);