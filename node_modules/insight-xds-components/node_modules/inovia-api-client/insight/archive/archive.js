"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function _objectWithoutProperties(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function baseUrl(){return _configService.getConfig().ARCHIVE_SERVICE_URL||ARCHIVE_SERVICE_URL}function listRoot(e,t){return listFolder(e,"/",t)}function listFolder(e,t,r){return httpClient.post(baseUrl()+"filesystem/listfolder",{store:e,path:t},r).then(function(e){return e.data}).then(function(e){return e.map(function(e){var t=e.fileName,r=e.fileSize,n=e.time,i=e.path,o=e.id,s=e.senderHostName,a=e.senderUserName,l=e.type,u=e.mimeType,p=e.customFieldValues,d=i||"/";return{name:t,fileSize:r,timeStamp:n.toString(),path:d,id:o,senderHostName:s,senderUserName:a,customFieldValues:p,type:l,mimeType:u}})})}function create(e,t){return httpClient.post(baseUrl()+"store",e,t)}function deleteStore(e,t,r){return httpClient._delete(baseUrl()+"store/"+e+"/"+t,r)}function deleteFile(e,t,r){return httpClient._delete(baseUrl()+"filesystem/"+e+"/"+t,r)}function deleteFolder(e,t,r){return httpClient.post(baseUrl()+"filesystem/deletefolder",{store:e,path:t},r)}function preview(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3,i=arguments[4];return httpClient.get(baseUrl()+"filesystem/"+e+"/"+t+"/preview?page="+r+"&numChars="+n,{headers:{Accept:"text/plain"},responseType:"text"},i).then(function(e){return e.data}).then(function(e){return"string"==typeof e?e:JSON.stringify(e)})}function generateDownloadLink(e,t){return baseUrl()+"filesystem/"+e+"/"+t+"/download"}function search(e,t,r){var n={page:1,pageSize:1e3,queryString:t,store:e,dateRange:{dateField:"_time",timeZone:"UTC",to:new Date,from:new Date(0)}};return httpClient.post((_configService.getConfig().RTC_SERVICE_URL||RTC_SERVICE_URL)+"query/search",n,r).then(function(e){return e.data}).then(function(e){return e.result.map(function(e){var t=e.fileName,r=e.fileSize,n=e._time,i=e.path,o=e.UUID,s=e.senderHostName,a=e.senderUserName,l=e.mimeType,u=_objectWithoutProperties(e,["fileName","fileSize","_time","path","UUID","senderHostName","senderUserName","mimeType"]),p=i||"/",d="/"===p[0]?p:"/"+p;return{name:t,fileSize:r,timeStamp:n,path:d,type:"FILE",id:o,senderHostName:s,senderUserName:a,customFieldValues:Object.keys(u).map(function(e){return u[e]}),mimeType:l}})})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.listRoot=listRoot,exports.listFolder=listFolder,exports.create=create,exports.deleteStore=deleteStore,exports.deleteFile=deleteFile,exports.deleteFolder=deleteFolder,exports.preview=preview,exports.generateDownloadLink=generateDownloadLink,exports.search=search;var _httpClient=require("../../httpClient"),httpClient=_interopRequireWildcard(_httpClient),_configService=require("../../configService");