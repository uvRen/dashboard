"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _immutable=require("immutable"),_immutable2=_interopRequireDefault(_immutable),_ACTION_TYPES=require("../infrastructure/ACTION_TYPES"),ShareRecord=_immutable2["default"].Record({identifier:"",shareByLinkAccessType:"NONE",createdBy:"",modifiedBy:"",users:_immutable2["default"].List()}),ShareUserRecord=_immutable2["default"].Record({shareAccessType:"NONE",userName:""}),initialState=_immutable2["default"].List();exports["default"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:initialState,r=arguments[1];switch(r.type){case _ACTION_TYPES.SHARE_ACTIONS.ADD:return e.push(new ShareRecord(r.share).set("users",_immutable2["default"].List(share.users.map(function(e){return new ShareUserRecord(e)}))));case _ACTION_TYPES.SHARE_ACTIONS.RECEIVE:return _immutable2["default"].List(r.shares.map(function(e){return new ShareRecord(e).set("users",_immutable2["default"].List(e.users.map(function(e){return new ShareUserRecord(e)})))}));case _ACTION_TYPES.SHARE_ACTIONS.REMOVE:return e.filter(function(e){return e.identifier!==r.shareIdToDelete});case _ACTION_TYPES.SHARE_ACTIONS.UPDATE:var t=e.findIndex(function(e){return e.identifier===r.share.identifier});return e.update(t,function(e){return new ShareRecord(r.share).set("users",_immutable2["default"].List(e.users.map(function(e){return new ShareUserRecord(e)})))});default:return e}};