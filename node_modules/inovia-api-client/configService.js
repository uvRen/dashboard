"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function configure(e){config=Object.keys(_constants.defaultConfiguration).reduce(function(t,n){return Object.assign(t,_defineProperty({},n,Object.assign({},_constants.defaultConfiguration[n],"string"==typeof e[n]?{url:e[n]}:e[n])))},{})}function discover(e){return _httpClient.get(e).then(function(e){return e.data}).then(function(e){return configure(e)})}function getConfig(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!config)throw"getConfig: not configured";if(!e||!t)throw"getConfig: serviceName and methodName are mandatory";var r=config[e];if(!r)throw"getConfig: no such service "+e;var o=r[t];if(!o)throw"getConfig: no such method "+t+" on "+e;var i=r.url;if(!i)throw"getConfig: no endpoint for "+e;return _urlTemplate2["default"].parse(""+i+o).expand(n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.configure=configure,exports.discover=discover,exports.getConfig=getConfig;var _urlTemplate=require("url-template"),_urlTemplate2=_interopRequireDefault(_urlTemplate),_httpClient=require("./httpClient"),_constants=require("./constants"),config=void 0;