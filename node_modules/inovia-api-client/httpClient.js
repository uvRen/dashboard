"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _objectWithoutProperties(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function getDefaults(){return{responseType:"json",method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}}function makeRequest(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=tokenService.getToken(),r=e.impersonate,n=_objectWithoutProperties(e,["impersonate"]),a=Object.assign({},getDefaults(),_extends({},n));if(!r)return t&&(a.headers[HEADER_KEY_AUTHORIZATION]=AUTHORIZATION_IDENTIFIER_TOKEN+" "+t),a;switch(r.by){case _constants.IMPERSONATION_TYPES.xila:if(!r["with"])throw new Error("Invalid impersonation configuration value: "+r["with"]);a.headers[HEADER_KEY_X_ILA_TOKEN]=r["with"];break;case _constants.IMPERSONATION_TYPES.token:if(!r["with"])throw new Error("Invalid impersonation configuration value: "+r["with"]);a.headers[HEADER_KEY_AUTHORIZATION]=AUTHORIZATION_IDENTIFIER_TOKEN+" "+r["with"];break;case _constants.IMPERSONATION_TYPES.anonymous:break;default:throw new Error("Invalid impersonation configuration type: "+r.by)}return a}function get(e,t){return _axios2["default"](Object.assign({},makeRequest(t),{url:e}))}function post(e,t,r){var n="string"==typeof t;return _axios2["default"](Object.assign({},makeRequest(r),{method:"POST",url:e,data:n?t:JSON.stringify(t)}))}function put(e,t,r){var n="string"==typeof t;return _axios2["default"](Object.assign({},makeRequest(r),{method:"PUT",url:e,data:n?t:JSON.stringify(t)}))}function _delete(e,t,r){var n="string"==typeof t;return _axios2["default"](Object.assign({},makeRequest(r),{method:"DELETE",url:e,data:n?t:JSON.stringify(t)}))}function upload(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"file",a=arguments[4],o=arguments[5],i=arguments[6],s=new FormData,u=Object.assign({headers:{},progress:function(e){o&&"function"==typeof o&&o(e.loaded/e.total)}},i,{method:"POST",url:e,data:s});if(s.append("fileName",r?r:t.name),s.append(n,t),a)for(var p in a)s.append(p,a[p]);return _axios2["default"](makeRequest(u))}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};exports.get=get,exports.post=post,exports.put=put,exports._delete=_delete,exports.upload=upload;var _axios=require("axios"),_axios2=_interopRequireDefault(_axios),_tokenService=require("./tokenService.js"),tokenService=_interopRequireWildcard(_tokenService),_constants=require("./constants"),HEADER_KEY_X_ILA_TOKEN="X-ILA-TOKEN",HEADER_KEY_AUTHORIZATION="Authorization",AUTHORIZATION_IDENTIFIER_TOKEN="Bearer";